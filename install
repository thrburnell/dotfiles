#!/usr/bin/env coffee
# vi: set filetype=coffee

fs = require 'fs'

filesPath = './files'

fs.readdir filesPath, (err, files) ->
  if err? then console.log 'ERROR: Couldn\'t locate dotfiles.'; return

  installed = 0

  for file in files
    dst = "#{process.env['HOME']}/#{file}"
    src = "#{fs.realpathSync(filesPath)}/#{file}"
  
    try 
      fs.symlinkSync src, dst
      console.log "+ Created #{dst} -> #{src}"
      installed++
    catch _
      console.log "- Cannot create symlink from #{dst}"

  console.log "\n$ Successfully installed #{installed}/#{files.length} dotfiles into $HOME."

